<div class="socketio-test-extension-settings">
  <div class="inline-drawer">
    <div class="inline-drawer-toggle inline-drawer-header">
      <b>Socket.IO 测试</b>
      <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
    </div>
    <div class="inline-drawer-content">
      <!-- 操作按钮 -->
      <div class="button-group">
        <button id="socketio-connectBtn" class="menu_button">连接</button>
        <button id="socketio-disconnectBtn" class="menu_button" disabled>断开</button>
        <button id="socketio-testBtn" class="menu_button" disabled>测试连接</button>
      </div>

      <!-- 可折叠的设置部分 -->
      <details class="animated-details">
        <summary><b>设置</b></summary>
        <div class="settings-grid">
          <label for="socketio-localPortInput">本地客户端端口:</label>
          <input type="number" id="socketio-localPortInput" class="text_pole" disabled>

          <label for="socketio-serverPortInput">服务器端口:</label>
          <input type="number" id="socketio-serverPortInput" class="text_pole" value="4000">

          <label for="socketio-serverAddressInput">服务器地址:</label>
          <input type="text" id="socketio-serverAddressInput" class="text_pole" value="http://localhost">
        </div>
        <div class="save-button-container">
          <button id="socketio-saveSettingsBtn" class="menu_button">保存</button>
        </div>

      </details>

      <!-- 可折叠的功能部分 -->
      <details class="animated-details">
        <summary><b>功能</b></summary>
        <div class="function-section">
          <div class="message-handling-section" id="message-handling-options">
            <label title="启用/禁用默认的消息转发行为。
      如果启用，则消息转发行为由预设中的“流式传输”开关的状态决定。
      如果禁用，则可以单独配置流式和非流式转发。">
              <input type="checkbox" id="socketio-defaultForwarding" checked>
              <small class="checkName">默认转发行为</small>
            </label>
            <label title="启用/禁用 LLM 消息的流式转发。
      流式转发会将每个生成的 token 分块发送到服务器。">
              <input type="checkbox" id="socketio-enableStream">
              <small class="checkName">LLM 消息转发 (流式)</small>
            </label>
            <label title="启用/禁用 LLM 消息的非流式转发。
      非流式转发会将整个生成的消息一次性发送到服务器。">
              <input type="checkbox" id="socketio-enableNonStream">
              <small class="checkName">LLM 消息转发 (非流式)</small>
            </label>
          </div>
        </div>
      </details>

      <!-- 可折叠的事件管理部分 (Log Table) -->
      <details class="animated-details">
        <summary><b>日志</b></summary>
        <div class="log-section">
          <div class="log-filter-container">
            <label for="socketio-logFilter">筛选:</label>
            <select id="socketio-logFilter">
              <option value="all">全部</option>
              <option value="success">成功</option>
              <option value="warning">警告</option>
              <option value="fail">失败</option>
              <option value="info">信息</option>
              <option value="source-client">客户端</option>
              <option value="source-server">服务器</option>
            </select>
          </div>

          <div class="log-table-wrapper">
            <table id="socketio-logTable" class="data-table">
              <thead>
                <tr>
                  <th class="log-time">时间</th>
                  <th class="log-type">类型</th>
                  <th class="log-message">消息</th>
                  <th class="log-source">发送方</th>
                  <th class="log-request-id">请求 ID</th>
                  <th class="log-output-id">输出 ID</th>
                </tr>
              </thead>
              <tbody id="socketio-logTableBody">
                <!-- Log messages will be added here -->
              </tbody>
            </table>
          </div>
        </div>
      </details>

      <hr class="sysHR" />
    </div>
  </div>
</div>